<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</title>
    <meta charset="UTF-8" />
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .create-user-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 2rem;
        }

        .form-card {
            background: white;
            border-radius: var(--radius-xl);
            padding: 2rem;
            box-shadow: var(--shadow-lg);
        }

        .form-header {
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--clr-border);
        }

        .form-header h1 {
            color: var(--clr-primary-dark);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .role-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .role-option {
            border: 2px solid var(--clr-border);
            border-radius: var(--radius);
            padding: 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
        }

        .role-option:hover {
            border-color: var(--clr-primary);
            background: #f8fafc;
        }

        .role-option.selected {
            border-color: var(--clr-primary);
            background: #e0e7ff;
        }

        .role-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            color: var(--clr-primary);
        }

        .role-name {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .role-desc {
            font-size: 0.875rem;
            color: var(--clr-text-light);
        }

        .form-actions {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--clr-border);
        }

        input[type="radio"] {
            display: none;
        }
    </style>
</head>
<body>

<div class="sidebar">
    <div class="sidebar-header">
        <h2><a href="/static" style="color: white; text-decoration: none;">–§–æ—Ä—É–º</a></h2>
        <div class="subtitle">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å</div>
    </div>

    <ul class="sidebar-nav">
        <li><a th:href="@{/admin/dashboard}"><i class="fas fa-tachometer-alt"></i> –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</a></li>
        <li><a th:href="@{/users/create}" class="active"><i class="fas fa-user-plus"></i> –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</a></li>
        <li><a th:href="@{/posts}"><i class="fas fa-comments"></i> –í—Å–µ –ø–æ—Å—Ç—ã</a></li>
        <li><a th:href="@{/contact}"><i class="fas fa-users"></i> –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a></li>
    </ul>

    <form th:action="@{/logout}" method="post">
        <input type="hidden" th:if="${_csrf != null}" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        <button type="submit" class="logout-btn">
            <i class="fas fa-sign-out-alt"></i> –í—ã–π—Ç–∏
        </button>
    </form>
</div>

<div class="main">
    <div class="create-user-container">
        <div class="form-card">
            <div class="form-header">
                <h1><i class="fas fa-user-plus"></i> –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h1>
                <p>–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</p>
            </div>

            <div th:if="${error}" class="alert alert-error">
                <i class="fas fa-exclamation-triangle"></i> <span th:text="${error}">–û—à–∏–±–∫–∞</span>
            </div>

            <div th:if="${success}" class="alert alert-success">
                <i class="fas fa-check-circle"></i> <span th:text="${success}">–£—Å–ø–µ—Ö</span>
            </div>

            <form th:action="@{/users/create}" method="post" id="createUserForm">
                <input type="hidden" th:if="${_csrf != null}" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

                <div class="form-group">
                    <label for="username" class="form-label">
                        <i class="fas fa-user"></i> –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è *
                    </label>
                    <input type="text" id="username" name="username"
                           class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
                           required minlength="3" maxlength="50">
                    <div class="form-hint">–õ–∞—Ç–∏–Ω—Å–∫–∏–µ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã –∏ —Å–∏–º–≤–æ–ª—ã ._-</div>
                </div>

                <div class="form-group">
                    <label for="password" class="form-label">
                        <i class="fas fa-lock"></i> –ü–∞—Ä–æ–ª—å *
                    </label>
                    <input type="password" id="password" name="password"
                           class="form-input" placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å"
                           required minlength="6">
                    <div class="form-hint">–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤</div>
                </div>

                <div class="form-group">
                    <label for="fullName" class="form-label">
                        <i class="fas fa-id-card"></i> –ü–æ–ª–Ω–æ–µ –∏–º—è
                    </label>
                    <input type="text" id="fullName" name="fullName"
                           class="form-input" placeholder="–ò–º—è –§–∞–º–∏–ª–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"
                           maxlength="100">
                </div>

                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-user-tag"></i> –†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è *
                    </label>

                    <div class="role-options">
                        <label class="role-option" for="roleStudent">
                            <input type="radio" id="roleStudent" name="role" value="ROLE_STUDENT" checked>
                            <div class="role-icon">üéì</div>
                            <div class="role-name">–°—Ç—É–¥–µ–Ω—Ç</div>
                            <div class="role-desc">–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø—Ä–∞–≤–∞: –ø–æ—Å—Ç—ã, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</div>
                        </label>

                        <label class="role-option" for="roleTeacher">
                            <input type="radio" id="roleTeacher" name="role" value="ROLE_TEACHER">
                            <div class="role-icon">üë®‚Äçüè´</div>
                            <div class="role-name">–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å</div>
                            <div class="role-desc">–ú–æ–∂–µ—Ç —É–¥–∞–ª—è—Ç—å –ø–æ—Å—Ç—ã, –º–æ–¥–µ—Ä–∏—Ä–æ–≤–∞—Ç—å</div>
                        </label>

                        <label class="role-option" for="roleAdmin">
                            <input type="radio" id="roleAdmin" name="role" value="ROLE_ADMIN">
                            <div class="role-icon">üîß</div>
                            <div class="role-name">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</div>
                            <div class="role-desc">–ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º</div>
                        </label>
                    </div>
                </div>

                <div class="form-actions">
                    <a th:href="@{/admin/dashboard}" class="cancel-btn">
                        <i class="fas fa-times"></i> –û—Ç–º–µ–Ω–∞
                    </a>
                    <button type="submit" class="submit-btn">
                        <i class="fas fa-user-plus"></i> –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // –í—ã–±–æ—Ä —Ä–æ–ª–∏
        document.querySelectorAll('.role-option').forEach(option => {
            option.addEventListener('click', function() {
                // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —É –≤—Å–µ—Ö
                document.querySelectorAll('.role-option').forEach(o => {
                    o.classList.remove('selected');
                });
                // –î–æ–±–∞–≤–ª—è–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–º—É
                this.classList.add('selected');
                // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º radio –∫–Ω–æ–ø–∫—É
                const radio = this.querySelector('input[type="radio"]');
                if (radio) radio.checked = true;
            });

            // –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ
            const radio = option.querySelector('input[type="radio"]');
            if (radio && radio.checked) {
                option.classList.add('selected');
            }
        });

        // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã
        const form = document.getElementById('createUserForm');
        form.addEventListener('submit', function(e) {
            const password = document.getElementById('password').value;
            if (password.length < 6) {
                e.preventDefault();
                alert('–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤');
                return false;
            }
            return true;
        });
    });
</script>
</body>
</html>
